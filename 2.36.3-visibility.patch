--- origsrc/glib-2.36.3/configure.ac	2013-08-04 18:11:14.140206800 -0500
+++ src/glib-2.36.3/configure.ac	2013-08-04 18:30:21.852852200 -0500
#@@ -3584,7 +3584,7 @@ dnl visibility attributes for symbol exp
 dnl
 GLIB_HIDDEN_VISIBILITY_CFLAGS=""
 case "$host" in
-  *-*-mingw*)
+  *-*-cygwin*|*-*-mingw*)
     dnl on mingw32 we do -fvisibility=hidden and __declspec(dllexport)
     AC_DEFINE([_GLIB_EXTERN], [__attribute__((visibility("default"))) __declspec(dllexport) extern],
               [defines how to decorate public symbols while building])
--- pkg-config-0.29.patched.raw/glib/configure
+++ pkg-config-0.29/glib/configure
@@ -26029,7 +26026,7 @@
 
 GLIB_HIDDEN_VISIBILITY_CFLAGS=""
 case "$host" in
-  *-*-mingw*)
+  *-*-cygwin*|*-*-mingw*)
 
 $as_echo "#define _GLIB_EXTERN __attribute__((visibility(\"default\"))) __declspec(dllexport) extern" >>confdefs.h
 
